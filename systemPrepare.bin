#!/usr/bin/env bash
setup(){
	adduser anon --disabled-password \
	#prepare environment and dependencies
<<<<<<< HEAD
	./installDocker.bin
	./cloneGit.bin
	./imageBuild.bin
=======
#	./installDocker.bin
#	./cloneGit.bin
# 	./namespaceObfsc.bin
#	./imageBuild.bin
>>>>>>> e32c09320aa6fcd8d17bdd938a98eb0a45a83e22

	#Spin up Nginx Container
	docker run -p 8080:80 ${NGINX}
	#This code needs a better loop execution
	########This code can cause errors##########
	#wait $!
	############################################

	#throw an if loop in here somewhere for process validation when starting containers
	#Spin up Tor container when done
	docker run -p 8118:8118 -p 9050:9050 -d ${TOR} -u
	curl --proxy localhost:8118 ${SPLASHSCREEN}

	#Logs user in as anon to prevent tampering with system following set-up
	#su anon

}

if setup; then
	echo "********************************************"
	echo "This environment is set up and running okay!"
	echo "********************************************"
else
	echo"*******************************************************************"
	echo"Setup error! Refer to other error messages for troubleshooting help"
	echo"*******************************************************************"
fi
